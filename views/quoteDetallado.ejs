<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cotización</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
    />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap");
      * {
        font-family: "Roboto", sans-serif;
      }
      .table-info {
        background: #86cfda !important;
      }
      body {
        padding: 0;
        margin: 0;
      }
      * {
        font-size: 12pt;
      }
      .page-break {
        page-break-before: always;
      }
      .align-left {
        text-align: left !important;
      }
      .align-center {
        text-align: center !important;
      }

      .align-right {
        text-align: right !important;
      }
      .bg-header {
        text-align: center;
        align-items: center;
        align-content: center;
        /* font-weight: bold; */
        min-height: 3cm;
        padding: 0 10cm;
      }
      /* .bg-totales {
        background: rgb(134, 207, 218) !important;
        font-weight: bold !important;
      } */
      .avoid-break-inside {
        page-break-inside: avoid !important;
      }

      .force-page-break {
        page-break-before: always !important;
      }
    </style>
    <script></script>
  </head>
  <body>
    <div class="row">
      <div class="col-6 bg-header" style="padding: 0 15px">
        <table class="table table-sm table-borderless align-left">
          <tr>
            <td colspan="2">
              <img
                src="<%= url_logo%>"
                width="240px"
                alt="logo_empresa"
                class="img-fluid"
              />
            </td>
          </tr>
          <tr>
            <td>RUC:</td>
            <td><%=document%></td>
          </tr>
          <tr>
            <td>Dirección</td>
            <td><%=address%></td>
          </tr>
          <tr>
            <td>Teléfono:</td>
            <td><%=phone%></td>
          </tr>
        </table>
      </div>
      <div class="col-6">
        <table class="table table-sm table-borderless align-right">
          <tr>
            <td>
              <h5>FECHA:<%=fecha%></h5>
            </td>
          </tr>
          <tr>
            <td>
              <h3>
                COTIZACIÓN <%=code%> <% if (!esunica) { %> - OPCIÓN <%= index %>
                <% } %>
              </h3>
              <h5>CLIENTE: <%=cliente%></h5>
            </td>
          </tr>
        </table>
        <h2></h2>
      </div>
    </div>

    <div class="row">
      <div class="col-6">
        <table class="table table-sm">
          <tr>
            <td
              style="background: #182e4b !important; color: white !important"
              colspan="2"
            >
              <b>DATOS DE EMBARQUE</b>
            </td>
          </tr>
          <tr>
            <td width="40%"><b>PUERTO DE ORIGEN:</b></td>
            <td width="60%"><%=origen%></td>
          </tr>
          <tr>
            <td width="40%"><b>PUERTO DE DESTINO: </b></td>
            <td width="60%"><%=destino%></td>
          </tr>
          <tr>
            <td width="40%"><b>MODALIDAD: </b></td>
            <td width="60%"><%=sentido %></td>
          </tr>
          <tr>
            <td width="40%"><b>TIPO EMBARQUE: </b></td>
            <td width="60%"><%= embarque %></td>
          </tr>
          <tr>
            <td width="40%"><b>INCOTERMS: </b></td>
            <td width="60%"><%=icoterm %></td>
          </tr>
          <tr>
            <td width="40%"><b>N° BULTOS: </b></td>
            <td width="60%"><%=numerobultos %></td>
          </tr>
          <tr>
            <td width="40%"><b>PESO: </b></td>
            <td width="60%"><%=peso %></td>
          </tr>
          <tr>
            <td width="40%"><b>VOLUMEN: </b></td>
            <td width="60%"><%=volumen %></td>
          </tr>
          <tr>
            <td width="40%"><b>VALOR MERCANCÍA: </b></td>
            <td width="60%"><%=amount %></td>
          </tr>
          <!-- <tr>
            <td>-  - </td>
          </tr> -->
        </table>
      </div>
      <div class="col-6 px-2">
        <table class="table table-sm">
          <tr>
            <td
              style="background: #182e4b !important; color: white !important"
              colspan="2"
            >
              <b>SERVICIOS</b>
            </td>
          </tr>
          <% if (lengthServ > 0) { %> <% for (let i = 0; i <
          Math.ceil(lengthServ); i++) { %>
          <tr>
            <td><%= servicios[i].name %></td>
            <td><%= servicios[i].estado %></td>
          </tr>
          <% } %> <% } %>
        </table>
      </div>
      <div class="col-12">
        <div class="row">
          <% if(tipo != 'AGRUPADO'){%> <% if (totalFlete!= '$0.00' && isImport)
          {%>
          <div class="col-12">
            <table class="table table-sm">
              <thead>
                <tr>
                  <th
                    style="
                      background: #182e4b !important;
                      color: white !important;
                    "
                    class="align-left"
                    width="80%"
                  >
                    <% var matchingTipoCostos = TipoCostos.filter((v) =>
                    v.codigo == "FL"); var result = matchingTipoCostos.length >
                    0 ? matchingTipoCostos[0].name : ""; %> <%= result %>
                  </th>
                  <th
                    style="
                      background: #182e4b !important;
                      color: white !important;
                    "
                    class="align-right"
                    width="20%"
                  >
                    MONTO
                  </th>
                </tr>
              </thead>
              <tbody>
                <% datosFlete.forEach(element => {%>
                <tr>
                  <td class="align-left" width="80%"><%=element.name%></td>
                  <td class="align-right" width="20%"><%=element.valor%></td>
                </tr>
                <%});%>
                <tr style="background: #86cfda !important">
                  <td class="align-right" width="80%">TOTAL:</td>
                  <td class="align-right" width="20%"><%=totalFlete %></td>
                </tr>
              </tbody>
            </table>
          </div>
          <%}%> <%}%> <% if(tipo != 'AGRUPADO'){%> <% if (totalOrigen!= '$0.00')
          {%>
          <div class="col-12">
            <table class="table table-sm">
              <thead>
                <tr class="subrayado">
                  <th
                    style="
                      background: #182e4b !important;
                      color: white !important;
                    "
                    class="align-left"
                    width="80%"
                  >
                    <% var matchingTipoCostos = TipoCostos.filter((v) =>
                    v.codigo == "OR"); var result = matchingTipoCostos.length >
                    0 ? matchingTipoCostos[0].name : ""; %> <%= result %>
                  </th>
                  <th
                    style="
                      background: #182e4b !important;
                      color: white !important;
                    "
                    class="align-right"
                    width="20%"
                  >
                    MONTO
                  </th>
                </tr>
              </thead>
              <tbody>
                <% datosOrigen.forEach(element => {%>
                <tr>
                  <td class="align-left" width="80%"><%=element.name%></td>
                  <td class="align-right" width="20%"><%=element.valor%></td>
                </tr>
                <%});%>
                <tr style="background: #86cfda !important">
                  <td class="align-right" width="80%">TOTAL:</td>
                  <td class="align-right" width="20%"><%=totalOrigen %></td>
                </tr>
              </tbody>
            </table>
          </div>
          <%}%> <%}%> <% if(tipo != 'AGRUPADO'){%> <% if (totalLocales!=
          '$0.00') {%>
          <div class="col-12">
            <table class="table table-sm">
              <thead>
                <tr class="subrayado">
                  <th
                    style="
                      background: #182e4b !important;
                      color: white !important;
                    "
                    class="align-left"
                    width="80%"
                  >
                    <% var matchingTipoCostos = TipoCostos.filter((v) =>
                    v.codigo == "LO"); var result = matchingTipoCostos.length >
                    0 ? matchingTipoCostos[0].name : ""; %> <%= result %>
                  </th>
                  <th
                    style="
                      background: #182e4b !important;
                      color: white !important;
                    "
                    class="align-right"
                    width="20%"
                  >
                    MONTO
                  </th>
                </tr>
              </thead>
              <tbody>
                <% datosLocales.forEach(element => {%>
                <tr>
                  <td class="align-left" width="80%"><%=element.name%></td>
                  <td class="align-right" width="20%"><%=element.valor%></td>
                </tr>
                <%});%>

                <tr style="background: #86cfda !important">
                  <td class="align-right" width="80%">TOTAL:</td>
                  <td class="align-right" width="20%"><%=totalLocales %></td>
                </tr>
              </tbody>
            </table>
          </div>
          <%}%> <%}%> <% if(tipo != 'AGRUPADO'){%> <% if (totalAduanas!=
          '$0.00') {%>
          <div class="col-12">
            <table class="table table-sm">
              <thead>
                <tr class="subrayado">
                  <th
                    style="
                      background: #182e4b !important;
                      color: white !important;
                    "
                    class="align-left"
                    width="80%"
                  >
                    <% var matchingTipoCostos = TipoCostos.filter((v) =>
                    v.codigo == "AD"); var result = matchingTipoCostos.length >
                    0 ? matchingTipoCostos[0].name : ""; %> <%= result %>
                  </th>
                  <th
                    style="
                      background: #182e4b !important;
                      color: white !important;
                    "
                    class="align-right"
                    width="20%"
                  >
                    MONTO
                  </th>
                </tr>
              </thead>
              <tbody>
                <% datosAduanas.forEach(element => {%>
                <tr>
                  <td class="align-left" width="80%"><%=element.name%></td>
                  <td class="align-right" width="20%"><%=element.valor%></td>
                </tr>
                <%});%>
                <tr style="background: #86cfda !important">
                  <td class="align-right" width="80%">TOTAL:</td>
                  <td class="align-right" width="20%"><%=totalAduanas %></td>
                </tr>
              </tbody>
            </table>
          </div>
          <%}%> <%}%> <% if(tipo != 'AGRUPADO'){%> <% if (totalFlete!= '$0.00'
          && !isImport) {%>
          <div class="col-12">
            <table class="table table-sm">
              <thead>
                <tr class="subrayado">
                  <th
                    style="
                      background: #182e4b !important;
                      color: white !important;
                    "
                    class="align-left"
                    width="80%"
                  >
                    <% var matchingTipoCostos = TipoCostos.filter((v) =>
                    v.codigo == "FL"); var result = matchingTipoCostos.length >
                    0 ? matchingTipoCostos[0].name : ""; %> <%= result %>
                  </th>
                  <th
                    style="
                      background: #182e4b !important;
                      color: white !important;
                    "
                    class="align-right"
                    width="20%"
                  >
                    MONTO
                  </th>
                </tr>
              </thead>
              <tbody>
                <% datosFlete.forEach(element => {%>
                <tr>
                  <td class="align-left" width="80%"><%=element.name%></td>
                  <td class="align-right" width="20%"><%=element.valor%></td>
                </tr>
                <%});%>
                <tr style="background: #86cfda !important">
                  <td class="align-right" width="80%">TOTAL:</td>
                  <td class="align-right" width="20%"><%=totalFlete %></td>
                </tr>
              </tbody>
            </table>
          </div>
          <%}%> <%}%> <% if(tipo != 'AGRUPADO'){%> <% if (totalAlmacenes!=
          '$0.00') {%>
          <div class="col-12">
            <table class="table table-sm">
              <thead>
                <tr class="subrayado">
                  <th
                    style="
                      background: #182e4b !important;
                      color: white !important;
                    "
                    class="align-left"
                    width="80%"
                  >
                    <% var matchingTipoCostos = TipoCostos.filter((v) =>
                    v.codigo == "AL"); var result = matchingTipoCostos.length >
                    0 ? matchingTipoCostos[0].name : ""; %> <%= result %>
                  </th>
                  <th
                    style="
                      background: #182e4b !important;
                      color: white !important;
                    "
                    class="align-right"
                    width="20%"
                  >
                    MONTO
                  </th>
                </tr>
              </thead>
              <tbody>
                <% datosAlmacenes.forEach(element => {%>
                <tr>
                  <td class="align-left" width="80%"><%=element.name%></td>
                  <td class="align-right" width="20%"><%=element.valor%></td>
                </tr>
                <%});%>
                <tr style="background: #86cfda !important">
                  <td class="align-right" width="80%">TOTAL:</td>
                  <td class="align-right" width="20%"><%=totalAlmacenes %></td>
                </tr>
              </tbody>
            </table>
          </div>
          <%}%> <%}%> <% if(tipo != 'AGRUPADO'){%> <% if
          (totalGastosTercero!='$0.00'){%>
          <div class="col-6">
            <table class="table table-sm">
              <thead>
                <tr class="subrayado">
                  <th
                    style="
                      background: #182e4b !important;
                      color: white !important;
                    "
                    class="align-left"
                    width="80%"
                  >
                    <% var matchingTipoCostos = TipoCostos.filter((v) =>
                    v.codigo == "GT"); var result = matchingTipoCostos.length >
                    0 ? matchingTipoCostos[0].name : ""; %> <%= result %>
                  </th>
                  <th
                    style="
                      background: #182e4b !important;
                      color: white !important;
                    "
                    class="align-right"
                    width="20%"
                  >
                    MONTO
                  </th>
                </tr>
              </thead>
              <tbody>
                <% datosGastosTerceros.forEach(element => {%>
                <tr>
                  <td class="align-left" width="80%"><%=element.name%></td>
                  <td class="align-right" width="20%"><%=element.valor%></td>
                </tr>
                <%});%>
                <tr style="background: #86cfda !important">
                  <td class="align-right" width="80%">TOTAL:</td>
                  <td class="align-right" width="20%">
                    <%=totalGastosTercero %>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <%}%> <%}%>
        </div>
        <% if(tipo == 'AGRUPADO'){%>
        <div class="col-12">
          <table class="table table-sm">
            <thead>
              <tr class="subrayado">
                <th class="align-left" colspan="6">CONCEPTOS DE GASTOS</th>
              </tr>
            </thead>
            <tbody>
              <% conceptos.forEach(element => {%>
              <tr>
                <td class="align-left" colspan="6"><%=element.name%></td>
              </tr>
              <%});%>
            </tbody>
          </table>
        </div>
        <%}%>
      </div>

      <div class="col-12">
        <table class="table table-sm">
          <tr>
            <td
              style="background: #182e4b !important; color: white !important"
              colspan="2"
            >
              <b>TOTALES:</b>
            </td>
          </tr>

          <tr>
            <td class="align-left" width="80%">
              TOTAL SERVICIOS DE <%= nameEmpresa %>
            </td>
            <td class="align-right" width="20%"><%= totalServicios%></td>
          </tr>
        </table>
      </div>
      <div class="col-12">
        <table class="table table-sm">
          <thead>
            <tr>
              <th
                style="background: #182e4b !important; color: white !important"
                class="align-left"
                width="40%"
              >
                IMPUESTO A LA ADUANA
              </th>
              <th
                style="background: #182e4b !important; color: white !important"
                class="align-left"
                width="40%"
              ></th>
              <th
                style="background: #182e4b !important; color: white !important"
                class="align-right"
                width="20%"
              >
                MONTO
              </th>
            </tr>
          </thead>
          <tbody>
            <% impuesto.forEach(element => {%>
            <tr>
              <td class="align-left" width="40%"><%=element.name%></td>
              <td class="align-right" width="40%">
                <%=element.percentage?element.percentage: ''%>
              </td>
              <td class="align-right" width="20%">$<%=element.valor%></td>
            </tr>
            <%});%>
            <tr>
              <td class="align-right" style="font-weight: bold" colspan="2">
                TOTAL DE IMPUESTO <% if (iso=='9589') {%> SUNAT <%}%> <% if
                (iso!='9589') {%> ADUANA <%}%>
              </td>
              <td class="align-right" style="font-weight: bold">
                <%=totalImpuesto%>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col-12 k-inside" id="divTotales">
        <table class="table table-sm">
          <tr>
            <td
              style="background: #182e4b !important; color: white !important"
              colspan="2"
            >
              <b>TOTALES:</b>
            </td>
          </tr>

          <tr>
            <td class="align-left" width="80%">
              <%= nombre_impuesto %> SOBRE SERVICIOS LOGISTICO
            </td>
            <td class="align-right" width="20%"><%=totalImpuestosIGV %></td>
          </tr>
        </table>
      </div>
      <div class="col-12">
        <table class="table table-sm">
          <tr>
            <td
              style="background: #3595c3 !important; color: white !important"
              colspan="2"
            >
              <b>TOTAL COTIZACIÓN:</b>
            </td>
          </tr>

          <tr>
            <td class="align-left" width="80%" style="font-weight: bold">
              TOTAL SERVICIOS DE <%= nameEmpresa %> <% if (impuesto.length>0) {
              %> + IMPUESTO DE ADUANA <%if (iso=='9589') {%> SUNAT <%}%> <%} %>
            </td>
            <td class="align-right" width="20%" style="font-weight: bold">
              <%=total%>
            </td>
          </tr>
        </table>
      </div>

      <div class="col-6">
        <table class="table table-sm">
          <tr>
            <td style="background: #004d40 !important; color: white !important">
              ESTA OFERTA INCLUYE
            </td>
          </tr>
          <%if (incluye.length>0) {%> <% incluye.forEach(element => {%>
          <tr>
            <td style="text-transform: uppercase">
              <span style="color: green; font-size: 1em">&#10004;</span>
              <%=element.name%>
            </td>
          </tr>
          <%});%> <%}%>
        </table>
        <table class="table table-sm">
          <tr>
            <td style="background: #dd2c00 !important; color: white !important">
              ESTA OFERTA NO INCLUYE
            </td>
          </tr>
          <%if (noincluye.length>0) {%> <% noincluye.forEach(element => {%>
          <tr>
            <td style="text-transform: uppercase">
              <span style="color: red; font-size: 1em">&#10007;</span>
              <%=element.name%>
            </td>
          </tr>
          <%});%> <%}%>
        </table>
      </div>
      <div class="col-6">
        <table class="table table-sm">
          <thead>
            <tr>
              <td style="background: #FFEB3B !important;">
                IMPORTANTE
              </th>
            </tr>
          </thead>
          <tbody>
            <%if (importante.length>0) {%> <% importante.forEach(element => {%>
            <tr>
              <td><%=element.name%></td>
            </tr>
            <%});%> <%}%>
          </tbody>
        </table>
      </div>
    </div>
    <div id="pageFooter" style="border-top: 1px solid #ddd; padding-top: 5px">
      <div class="item-center t-footer">
        <p
          style="
            margin: 0;
            padding-bottom: 5px;
            text-align: right;
            font-family: sans-serif;
            font-size: 0.7em;
          "
        >
          <%=business_name%><%=address%> Página {{ page }} de {{ pages }}
        </p>
      </div>
    </div>
  </body>
</html>